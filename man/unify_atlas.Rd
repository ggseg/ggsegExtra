% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/unify-atlas.R
\name{unify_atlas}
\alias{unify_atlas}
\title{Create unified brain atlas}
\usage{
unify_atlas(
  atlas_2d = NULL,
  atlas_3d = NULL,
  atlas_name = NULL,
  type = NULL,
  surface = "inflated",
  subject = "fsaverage5",
  tolerance = 1e-04
)
}
\arguments{
\item{atlas_2d}{A brain_atlas object with geometry column (from ggseg/ggseg.formats),
or NULL if only 3D atlas is available}

\item{atlas_3d}{A ggseg3d_atlas object with mesh data, or NULL if only 2D atlas
is available}

\item{atlas_name}{Name for the unified atlas. If NULL, derived from input atlas.}

\item{type}{Atlas type: "cortical" or "subcortical". If NULL, derived from input.}

\item{surface}{Surface type in the 3D atlas to use (must match exactly, e.g. "inflated")}

\item{subject}{FreeSurfer subject (default "fsaverage5")}

\item{tolerance}{Coordinate matching tolerance (default 1e-4). Increase if
coordinates have minor floating-point differences.}
}
\value{
A unified brain_atlas with geometry and/or vertices columns
}
\description{
Converts existing 2D and/or 3D atlases into a unified brain_atlas format
that supports both ggseg (2D) and ggseg3d (3D) rendering.
}
\details{
The function handles three scenarios:
\itemize{
\item Both atlases provided: Combines geometry from 2D and vertex indices from 3D
\item Only 2D atlas: Keeps geometry, vertices will be empty (2D rendering only)
\item Only 3D atlas: Computes vertex indices, geometry will be NULL (3D rendering only)
}
}
\section{Surface matching}{

When a 3D atlas is provided, vertex indices are computed by matching the
atlas mesh coordinates to a FreeSurfer brain mesh. This requires:
\itemize{
\item The \code{surface} parameter must match a surface in the 3D atlas
\item The 3D atlas must use standard FreeSurfer coordinates (not transformed)
\item FreeSurfer must be installed and configured
}
}

\examples{
\dontrun{
# From both 2D and 3D atlases
unified <- unify_atlas(ggseg::dk, ggseg3d::dk_3d)

# From 3D atlas only
unified <- unify_atlas(atlas_3d = dk_3d)

# From 2D atlas only (no 3D rendering)
unified <- unify_atlas(atlas_2d = ggseg::dk)
}
}
