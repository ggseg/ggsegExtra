% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/atlas-cortical.R
\name{create_cortical_from_neuromaps}
\alias{create_cortical_from_neuromaps}
\title{Create cortical atlas from a neuromaps annotation}
\usage{
create_cortical_from_neuromaps(
  source,
  desc,
  space = "fsaverage",
  density = "10k",
  label_table = NULL,
  n_bins = NULL,
  atlas_name = NULL,
  output_dir = NULL,
  hemisphere = c("rh", "lh"),
  views = c("lateral", "medial", "superior", "inferior"),
  tolerance = NULL,
  smoothness = NULL,
  snapshot_dim = NULL,
  cleanup = NULL,
  verbose = get_verbose(),
  skip_existing = NULL,
  steps = NULL
)
}
\arguments{
\item{source}{Neuromaps source identifier (e.g., \code{"schaefer"}).
See \code{\link[neuromapr:neuromaps_available]{neuromapr::neuromaps_available()}} for options.}

\item{desc}{Neuromaps descriptor key (e.g., \code{"400Parcels7Networks"}).}

\item{space}{Coordinate space. Defaults to \code{"fsaverage"}.}

\item{density}{Surface vertex density. Defaults to \code{"10k"}
(fsaverage5, 10,242 vertices).}

\item{label_table}{Optional data.frame mapping parcel IDs to region
names. Must have columns \code{id} (integer) and \code{region} (character).
Optionally include \code{colour} (hex string). When \code{NULL}, regions are
auto-named.}

\item{n_bins}{Number of quantile bins for continuous brain maps.
When \code{NULL} (default), auto-detected via Sturges' rule
(\code{1 + log2(n)}, clamped to 5â€“20). Ignored for integer parcellation
data. See \code{\link[=read_neuromaps_annotation]{read_neuromaps_annotation()}}.}

\item{atlas_name}{Name for the atlas. If NULL, derived from the input
filename.}

\item{output_dir}{Directory to store intermediate files (screenshots, masks,
contours). Defaults to \code{\link[=tempdir]{tempdir()}}.}

\item{hemisphere}{Which hemispheres to include: "lh", "rh", or both.}

\item{views}{Which views to include: "lateral", "medial",
"superior", "inferior".}

\item{tolerance}{Simplification tolerance for 2D polygons. Higher values
produce simpler shapes with fewer vertices. Passed to \code{\link[sf:geos_unary]{sf::st_simplify()}}.
If not specified, uses \code{options("ggseg.extra.tolerance")} or the
\code{GGSEG_EXTRA_TOLERANCE} environment variable. Default is 0 (no simplification).}

\item{smoothness}{Smoothing factor for 2D contours. Higher values produce
smoother region boundaries. Passed to \code{\link[smoothr:smooth]{smoothr::smooth()}}. If not
specified, uses \code{options("ggseg.extra.smoothness")} or the
\code{GGSEG_EXTRA_SMOOTHNESS} environment variable. Default is 5.}

\item{snapshot_dim}{Width and height (in pixels) for brain surface
snapshots. Higher values capture more detail for dense parcellations.
If not specified, uses \code{options("ggseg.extra.snapshot_dim")} or the
\code{GGSEG_EXTRA_SNAPSHOT_DIM} environment variable. Default is 800.}

\item{cleanup}{Remove intermediate files after atlas creation. If not
specified, uses \code{options("ggseg.extra.cleanup")} or the \code{GGSEG_EXTRA_CLEANUP}
environment variable. Default is TRUE.}

\item{verbose}{Logical. If not specified, uses the value from
\code{options("ggseg.extra.verbose")} or the \code{GGSEG_EXTRA_VERBOSE}
environment variable. Defaults to \code{TRUE}.
Use \code{options(ggseg.extra.verbose = FALSE)} to suppress output globally.}

\item{skip_existing}{Skip generating output files that already exist,
allowing interrupted atlas creation to resume. If not specified, uses
\code{options("ggseg.extra.skip_existing")} or the \code{GGSEG_EXTRA_SKIP_EXISTING}
environment variable. Default is TRUE.}

\item{steps}{Which pipeline steps to run. See \code{\link[=create_cortical_from_annotation]{create_cortical_from_annotation()}}
for step descriptions. Use \code{steps = 1} for 3D-only atlas.}
}
\value{
A \code{ggseg_atlas} object.
}
\description{
\ifelse{html}{\href{https://lifecycle.r-lib.org/articles/stages.html#experimental}{\figure{lifecycle-experimental.svg}{options: alt='[Experimental]'}}}{\strong{[Experimental]}}

Build a brain atlas directly from a \href{https://github.com/netneurolab/neuromaps}{neuromaps} annotation. The annotation
is downloaded via \code{\link[neuromapr:fetch_neuromaps_annotation]{neuromapr::fetch_neuromaps_annotation()}}.

Supports both surface (\code{.func.gii}) and volume (\code{.nii}/\code{.nii.gz})
annotations. Volume annotations in MNI152 space are automatically
projected to fsaverage5 via FreeSurfer's \code{mri_vol2surf}.

Continuous brain maps (PET, gene expression, etc.) are discretized
into quantile bins via \code{n_bins}. Integer parcellation maps use
vertex value 0 as medial wall.

Defaults to fsaverage5 surface space (\code{space = "fsaverage"},
\code{density = "10k"}, 10,242 vertices per hemisphere). Surface
annotations need no FreeSurfer for 3D-only atlases (\code{steps = 1});
volume annotations always require FreeSurfer.
}
\examples{
\dontrun{
atlas <- create_cortical_from_neuromaps(
  source = "abagen",
  desc = "genepc1",
  n_bins = 7,
  steps = 1
)
ggseg3d::ggseg3d(atlas = atlas)
}
}
