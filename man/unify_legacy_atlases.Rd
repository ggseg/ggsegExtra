% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/atlas-convert.R
\name{unify_legacy_atlases}
\alias{unify_legacy_atlases}
\title{Convert legacy ggseg atlases to brain_atlas format}
\usage{
unify_legacy_atlases(
  atlas_2d = NULL,
  atlas_3d = NULL,
  atlas_name = NULL,
  type = NULL,
  compute_vertices = FALSE,
  surface = "inflated",
  subject = "fsaverage5",
  tolerance = 1e-04
)
}
\arguments{
\item{atlas_2d}{A legacy \code{brain_atlas} or \code{ggseg_atlas} with 2D geometry,
or NULL.}

\item{atlas_3d}{A \code{ggseg3d_atlas} with mesh data, or NULL.}

\item{atlas_name}{Name for the output atlas. If NULL, derived from input.}

\item{type}{Atlas type: \code{"cortical"} or \code{"subcortical"}. If NULL, inferred
from the input atlases.}

\item{compute_vertices}{If TRUE and the 3D atlas lacks vertex indices,
attempt to compute them by matching mesh coordinates to a FreeSurfer
surface. Requires FreeSurfer. Default FALSE for speed.}

\item{surface}{Which surface to match against when computing vertices
(e.g., \code{"inflated"}). Must match the 3D atlas surface exactly.}

\item{subject}{FreeSurfer subject for surface coordinates (default
\code{"fsaverage5"}).}

\item{tolerance}{Coordinate matching tolerance when computing vertices.}
}
\value{
A \code{brain_atlas} object.
}
\description{
\ifelse{html}{\href{https://lifecycle.r-lib.org/articles/stages.html#superseded}{\figure{lifecycle-superseded.svg}{options: alt='[Superseded]'}}}{\strong{[Superseded]}}

Convert old-style ggseg (2D) and ggseg3d (3D) atlases into the new
\code{brain_atlas} format. This is a bridge function for working with existing
atlases during the transition period.

For new atlases, use \code{\link[=create_cortical_atlas]{create_cortical_atlas()}} or
\code{\link[=create_subcortical_atlas]{create_subcortical_atlas()}}
instead - they produce better results with proper vertex indices.

The function handles three scenarios:
\itemize{
\item \strong{Both 2D and 3D}: Merges geometry with vertex data
\item \strong{3D only}: Extracts vertices, optionally computes indices from mesh
\item \strong{2D only}: Keeps geometry, 3D rendering unavailable
}

If the 3D atlas already contains vertex indices (newer ggseg3d atlases),
those are preserved. Otherwise, if \code{compute_vertices = TRUE} and FreeSurfer
is available, vertex indices are computed by matching mesh coordinates to
the brain surface.
}
\examples{
\dontrun{
# Convert a 3D atlas (quick, uses existing data)
new_atlas <- unify_legacy_atlases(atlas_3d = dk_3d)

# Merge 2D and 3D atlases
new_atlas <- unify_legacy_atlases(atlas_2d = dk, atlas_3d = dk_3d)

# Compute vertex indices from mesh (slower, needs FreeSurfer)
new_atlas <- unify_legacy_atlases(
  atlas_3d = dk_3d,
  compute_vertices = TRUE
)
}
}
