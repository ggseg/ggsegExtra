<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Contributing: prepare a repository for the atlas • ggsegExtra</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Contributing: prepare a repository for the atlas">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ggsegExtra</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.6.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/ggsegExtra.html">Get started</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/system_setup.html">System Setup</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ggseg/ggsegExtra/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Contributing: prepare a repository for the atlas</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ggseg/ggsegExtra/blob/main/vignettes/ggsegrepo.Rmd" class="external-link"><code>vignettes/ggsegrepo.Rmd</code></a></small>
      <div class="d-none name"><code>ggsegrepo.Rmd</code></div>
    </div>

    
    
<p>ggsegExtra does not contain any atlases it self, but rather retains a
record of all confirmed extra atlases compatible with ggseg or ggseg3d.
If you have a working atlas, either having made it your self or
following one of our other tutorials, and want it featured as a
confirmed atlas in ggsegExtra, there are some steps to follow.</p>
<ol style="list-style-type: decimal">
<li>the data must work well with either ggseg or ggseg3d.</li>
<li>the data must be in its own R-package.</li>
<li>the R-package must be hosted online in a version control repository.
<ul>
<li>like GitHub, GitLab, BitBucket etc.</li>
</ul>
</li>
<li>Let us know about the atlas so we can check it out.
<ul>
<li>either through <a href="https://github.com/ggseg/ggsegExtra/issues" class="external-link">github-issues</a> with
information on the online repository it is in.</li>
<li>or by doing a pull request after adding atlas information in the <a href="https://github.com/ggseg/ggsegExtra/blob/master/R/extra-atlases.R" class="external-link">atlas
list</a>
</li>
</ul>
</li>
<li>once everything is in order, we will add it to the list of confirmed
atlases.</li>
</ol>
<div class="section level2">
<h2 id="help-setting-up-the-package-repository">Help setting up the package repository<a class="anchor" aria-label="anchor" href="#help-setting-up-the-package-repository"></a>
</h2>
<p>Since setting up a package for the first time, particularly a data
package, we set up a function to help you get started. It contains
tests, and some general set-up we would expect from a ggseg-atlas
package. If you already are comfortable making R-packages, skip this
step. If not, it is intended to help you set up a skeleton for the
package.</p>
<p>To create a ggseg repo, use the RStudio New Project creation GUI, and
look for the ggseg icon.</p>
<div class="section level3">
<h3 id="change-description">Change DESCRIPTION<a class="anchor" aria-label="anchor" href="#change-description"></a>
</h3>
<p>The DESCRIPTION file is a text-file with important information
regarding the contents of the package. This file is necessary to edit
for several reasons:</p>
<ul>
<li>You (and whoever assisted you) should be listed as authors and
maintainers of the package, remove Athanasia and Didac and add your own
names in stead (ORCID is optional, delete if you don’t have one).</li>
<li>The <code>Description:</code> section should be altered to reflect
the contents of the package.</li>
<li>
<code>URL:</code> and <code>BugReports</code> must be altered to
point to the remote repository it will be stored in.
<ul>
<li>if it does not have a feature like github issues, BugReports may be
deleted as a whole.</li>
</ul>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="add-data">Add data<a class="anchor" aria-label="anchor" href="#add-data"></a>
</h3>
<p>You will need to place your atlas files, as <code>.rda</code> files
in the <code>data/</code> folder. The atlas data-objects must have the
same name as the file. In this case <code>cc200.rda</code> should load
the object <code>cc200</code> into an R-environment using
<code>load("data/cc200.rda")</code>, and contain a ggseg-atlas (use
<code><a href="https://rdrr.io/pkg/ggseg/man/is_ggseg_atlas.html" class="external-link">is_ggseg_atlas()</a></code> and <code>as_ggseg_atlas</code> to check).
Likewise, <code>cc200_3d.rda</code>should load the object
<code>cc200_3d</code> into an R-environment using
<code>load("data/cc200_3d.rda")</code>, and should contains a
ggseg3d-atlas (use <code><a href="https://rdrr.io/pkg/ggseg3d/man/is_ggseg3d_atlas.html" class="external-link">is_ggseg3d_atlas()</a></code> and
<code>as_ggseg3d_atlas</code> to check). And then adapt the atlas
information in the <code>R/cc200.R</code> to match the atlas you are
adding. Take particular care with the reference to the atlas with the
original paper first introducing the parcellation.</p>
</div>
<div class="section level3">
<h3 id="getting-tests-to-pass">Getting tests to pass<a class="anchor" aria-label="anchor" href="#getting-tests-to-pass"></a>
</h3>
<p>Once data is added, and references fixed, try to run the tests.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">test</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>There will likely be some failures, try to resolve them by looking at
the error messages.</p>
<p><strong>Common things to check:</strong></p>
<ul>
<li>if you only have 3d or a 2d (ggplot) atlas, comment out sections in
the tests that refer to the atlas type you are <em>not</em>
including.</li>
<li>if you have a ggseg-atlas, the tests automatically check for a
palette matching the <code>atlas$region</code> column.
<ul>
<li>if you have not made such a palette, please do so, look into
<code>data-raw/palettes.R</code> for setting it up.</li>
<li>palettes are stores as a list in the <code>brain_pal</code> object,
where each list contains a named string vector, the names should match
<code>atlas$region</code> and the strings should be hexidecimal colour
codes.</li>
</ul>
</li>
</ul>
<p>Let us know if you struggle. We would love to improve this tutorial
with the issues you might encounter.</p>
</div>
<div class="section level3">
<h3 id="getting-package-tests-to-pass">Getting package tests to pass<a class="anchor" aria-label="anchor" href="#getting-package-tests-to-pass"></a>
</h3>
<p>Once all tests are passed, try running package checks with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">check</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>which will attempt to build you package and see how it goes.</p>
<p>Look at the error messages and try to resolve them by reading the
carefully.</p>
<p><strong>Common things to check:</strong></p>
<ul>
<li>if you have only included a single atlas of either ggseg or ggseg3d:
<ul>
<li>remove the unneeded atlas in the <code>data/atlas.rda</code> file,
it contains information to both atlases and will fail if only one of
them are present in <code>data/</code>.</li>
</ul>
</li>
<li>you have not added a license: try using
<code>usethis::use_mit_license("Your Name Here")</code>
</li>
</ul>
<p>There will likely be some failures, try to resolve them. Let us know
if you struggle. We would love to improve this tutorial with the issues
you might encounter.</p>
<p>If everything goes well, push it all to your remote repository and
let us know about it. We will double check and add it if it all checks
out!</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Athanasia Mo Mowinckel, Didac Vidal-Piñeiro.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
